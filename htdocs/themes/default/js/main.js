!function(){"use strict";var o={el:null,create:function(){this.el=document.createElement("div"),this.el.setAttribute("class","image-popup"),this.el.innerHTML='<img src="#" alt="" />',document.body.appendChild(this.el),document.body.addEventListener("click",o.remove),document.addEventListener("keyup",o.removeOnEsc),window.onpopstate=function(e){e.state&&e.state.image?(o.el||o.create(),o.setImage(e.state.image,!0)):o.el&&o.remove(e,!0)}},remove:function(e,t){e.preventDefault(),e.stopPropagation(),document.body.removeEventListener("click",o.remove),document.removeEventListener("keyup",o.removeOnEsc),document.body.removeChild(o.el),o.el=null,t||history.pushState({},"",window.location.pathname)},removeOnEsc:function(e){27===e.keyCode&&o.remove(e)},setImage:function(e,t){this.el.getElementsByTagName("img")[0].setAttribute("src",e),t||history.pushState({image:e},"","#"+e)}};Element.prototype.closest&&document.body.addEventListener("click",function(e){var t=e.target.closest("a.gallery__link");t&&t.getAttribute("href")&&(e.preventDefault(),e.stopPropagation(),o.el||o.create(),o.setImage(t.getAttribute("href")))}),Document.prototype.querySelectorAll&&document.querySelectorAll("[data-ajax-url]").forEach(function(e){if(e.getAttribute("data-ajax-url")){var t=new XMLHttpRequest;t.open("GET",e.getAttribute("data-ajax-url"),!0),t.onload=function(){200<=this.status&&this.status<400&&(e.outerHTML=this.response)},t.send()}})}();