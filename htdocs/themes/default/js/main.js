!function(){"use strict";if("querySelectorAll"in document&&"addEventListener"in window){window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(t){var e,o=(this.document||this.ownerDocument).querySelectorAll(t),n=this;do{for(e=o.length;--e>=0&&o.item(e)!==n;);}while(e<0&&(n=n.parentElement));return n}),window.history&&!window.history.pushState&&(window.history.pushState=function(t,e,o){return[t,e,o]}),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(t,e){e=e||window;for(var o=0;o<this.length;o++)t.call(e,this[o],o,this)});var t={el:null,create:function(){this.el=document.createElement("div"),this.el.setAttribute("class","image-popup"),this.el.innerHTML='<img src="#" alt="" />',document.body.appendChild(this.el),document.body.addEventListener("click",t.remove),window.onpopstate=function(e){e.state&&e.state.image?(t.el||t.create(),t.setImage(e.state.image,!0)):t.el&&t.remove(e,!0)}},remove:function(e,o){e.preventDefault(),e.stopPropagation(),document.body.removeEventListener("click",t.remove),document.body.removeChild(t.el),t.el=null,o||history.pushState({},"",window.location.pathname)},setImage:function(t,e){this.el.getElementsByTagName("img")[0].setAttribute("src",t),e||history.pushState({image:t},"","#"+t)}};document.querySelectorAll("[data-ajax-url]").forEach(function(t){if(t.getAttribute("data-ajax-url")){var e=new XMLHttpRequest;e.open("GET",t.getAttribute("data-ajax-url"),!0),e.onload=function(){this.status>=200&&this.status<400&&(t.innerHTML=this.response)},e.send()}}),document.body.addEventListener("click",function(e){var o=e.target.closest("a.gallery__link");o&&o.getAttribute("href")&&(e.preventDefault(),e.stopPropagation(),t.el||t.create(),t.setImage(o.getAttribute("href")))})}}();