!function(){"use strict";if("querySelectorAll"in document&&"addEventListener"in window){window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(t){var e,n=(this.document||this.ownerDocument).querySelectorAll(t),o=this;do for(e=n.length;--e>=0&&n.item(e)!==o;);while(e<0&&(o=o.parentElement));return o}),window.history&&!window.history.pushState&&(window.history.pushState=function(t,e,n){return[t,e,n]});var t={el:null,create:function(){this.el=document.createElement("div"),this.el.setAttribute("class","image-popup"),this.el.innerHTML='<img src="#" alt="" />',document.body.appendChild(this.el),document.body.addEventListener("click",t.remove),window.onpopstate=function(e){e.state&&e.state.image?(t.el||t.create(),t.setImage(e.state.image,!0)):t.el&&t.remove(e,!0)}},remove:function(e,n){e.preventDefault(),e.stopPropagation(),document.body.removeEventListener("click",t.remove),document.body.removeChild(t.el),t.el=null,n||history.pushState({},"",window.location.pathname)},setImage:function(t,e){this.el.getElementsByTagName("img")[0].setAttribute("src",t),e||history.pushState({image:t},"","#"+t)}};Array.prototype.forEach.call(document.querySelectorAll("[data-ajax-url]"),function(t,e){!function(t){if(console.log(t.getAttribute("data-ajax-url")),t.getAttribute("data-ajax-url")){var e=new XMLHttpRequest;e.open("GET",t.getAttribute("data-ajax-url"),!0),e.onload=function(){this.status>=200&&this.status<400&&(t.innerHTML=this.response)},e.send()}}(t)}),document.body.addEventListener("click",function(e){var n=e.target.closest("a.gallery__link");n&&n.getAttribute("href")&&(e.preventDefault(),e.stopPropagation(),t.el||t.create(),t.setImage(n.getAttribute("href")))})}}();